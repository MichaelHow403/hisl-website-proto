"use client";

import GlobalHeader from '@/components/sections/GlobalHeader';
import GlobalFooter from '@/components/sections/GlobalFooter';
import { getImage } from '@/app/lib/imagery';

// HoneycombAgent component for interactive agent visualization
function HoneycombAgent({ 
  position, 
  agent 
}: { 
  position: string; 
  agent: { name: string; icon: string; desc: string; color: string }
}) {
  return (
    <div 
      className={`absolute ${position} group cursor-pointer`}
      style={{ width: '10%', aspectRatio: '1' }}
    >
      {/* Invisible hover target (larger area) */}
      <div className="absolute inset-0 -m-8" />
      
      {/* Agent name only - no icon */}
      <div className="relative w-full h-full flex items-center justify-center opacity-70 group-hover:opacity-100 transition-opacity">
        <span className="text-[10px] font-medium text-center leading-tight">{agent.name}</span>
      </div>
      
      {/* Tooltip on hover */}
      <div className="absolute top-full left-1/2 -translate-x-1/2 mt-2 w-64 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50">
        <div className="rounded-xl border border-edge bg-panel/95 backdrop-blur-xl p-4 shadow-xl">
          <div className="flex items-center gap-2 mb-2">
            <h3 className={`font-semibold text-${agent.color}`}>
              {agent.name}
            </h3>
          </div>
          <p className="text-xs text-muted leading-relaxed">
            {agent.desc}
          </p>
        </div>
      </div>
    </div>
  );
}

export default function HomePage() {

  return (
    <main className="min-h-screen bg-bg text-text">
      {/* 1. nav_primary_v1: GlobalHeader */}
      <GlobalHeader />
      
      {/* 2. HERO SECTION - Locked Content Structure */}
      <section className="relative min-h-[90vh] flex items-center justify-center overflow-hidden">
        {/* Background - properly darkened */}
        <div className="absolute inset-0 z-0">
          <img 
            src={getImage('hero_construction')} 
            alt="" 
            className="w-full h-full object-cover"
            style={{ filter: 'brightness(0.25)' }}
          />
          {/* Aggressive vignette for maximum text contrast */}
          <div className="absolute inset-0 bg-gradient-to-b from-bg/70 via-bg/50 to-bg" />
          <div className="absolute inset-0 bg-gradient-to-r from-bg/90 via-transparent to-bg/90" />
        </div>
        
        {/* Hero Content */}
        <div className="relative z-10 container-wrap text-center px-6">
          {/* Badge */}
          <div className="inline-flex items-center gap-2 px-5 py-2 rounded-full border-2 border-brandGold bg-brandGold/5 backdrop-blur-sm mb-8">
            <span className="w-2 h-2 rounded-full bg-brandGold animate-pulse" />
            <span className="text-sm font-semibold text-brandGold tracking-wide">
              Industrial Safety Intelligence
            </span>
          </div>
          
          {/* Main Headline - From Master Lock */}
          <h1 className="font-spectral text-[clamp(42px,7vw,84px)] font-bold tracking-tight leading-[0.95] mb-6">
            <span className="text-white">Human-first</span>
            <br />
            <span className="text-brandGold">Industrial Intelligence.</span>
          </h1>
          
          {/* Subheadline */}
          <p className="text-[clamp(18px,2.5vw,24px)] leading-relaxed text-text/90 max-w-3xl mx-auto mb-4">
            Sovereign AI that keeps people safe — and operations sustainable.
          </p>
          
          {/* Value Prop */}
          <p className="text-[17px] leading-relaxed text-muted max-w-2xl mx-auto mb-10">
            Auditable pipelines. Offline-first architecture. Human-in-the-loop by design.
            <br />
            <span className="text-aiGreen">Built for construction, pharma, manufacturing, energy, and agri-tech.</span>
          </p>
          
          {/* CTA Buttons */}
          <div className="flex items-center justify-center gap-4 flex-wrap">
            <a 
              href="/contact" 
              className="inline-flex items-center gap-2 px-8 py-4 rounded-xl bg-gradient-to-r from-brandGold to-[#c9992f] text-bg font-semibold text-[17px] shadow-lg hover:shadow-xl hover:scale-105 transition-all"
            >
              Start a Demo
              <span className="text-lg">→</span>
            </a>
            <a 
              href="/globe" 
              className="inline-flex items-center gap-2 px-8 py-4 rounded-xl border-2 border-edge bg-panel/60 backdrop-blur text-text font-semibold text-[17px] hover:border-aiGreen/50 transition-colors"
            >
              Where your prompts go
              <span className="text-aiGreen">↗</span>
            </a>
          </div>
          
          {/* Trust Indicators */}
          <div className="mt-12 flex items-center justify-center gap-8 flex-wrap text-sm text-muted">
            <div className="flex items-center gap-2">
              <span className="text-aiGreen">✓</span>
              <span>GDPR Compliant</span>
            </div>
            <div className="flex items-center gap-2">
              <span className="text-aiGreen">✓</span>
              <span>EU AI Act Ready</span>
            </div>
            <div className="flex items-center gap-2">
              <span className="text-aiGreen">✓</span>
              <span>Offline-First</span>
            </div>
            <div className="flex items-center gap-2">
              <span className="text-aiGreen">✓</span>
              <span>On-Premises Deploy</span>
            </div>
          </div>
        </div>
        
        {/* Scroll indicator */}
        <div className="absolute bottom-8 left-1/2 -translate-x-1/2 z-10">
          <div className="flex flex-col items-center gap-2 animate-bounce">
            <span className="text-xs text-muted uppercase tracking-wide">Scroll</span>
            <svg className="w-6 h-6 text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>
      </section>

      {/* 3. PERFORMANCE BADGES */}
      <section className="py-12 border-y border-edge bg-gradient-to-r from-panel/10 via-panel/20 to-panel/10">
        <div className="container-wrap">
          <div className="flex items-center justify-center gap-8 md:gap-12 flex-wrap">
            <div className="flex items-center gap-3">
              <span className="text-3xl">⚡</span>
              <div>
                <p className="text-xs uppercase tracking-wide text-muted">TTFT Target</p>
                <p className="text-xl font-semibold text-brandGold">≤ 800ms</p>
              </div>
            </div>
            <div className="flex items-center gap-3">
              <span className="text-3xl">🚀</span>
              <div>
                <p className="text-xs uppercase tracking-wide text-muted">Throughput</p>
                <p className="text-xl font-semibold text-aiGreen">≥ 40 tok/s</p>
              </div>
            </div>
            <div className="flex items-center gap-3">
              <span className="text-3xl">🔒</span>
              <div>
                <p className="text-xs uppercase tracking-wide text-muted">Mode</p>
                <p className="text-xl font-semibold text-text">Offline-First</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* 4. SOLUTION SECTION */}
      <section className="py-20 md:py-28 bg-panel/20">
        <div className="container-wrap">
          <div className="text-center mb-12">
            <h2 className="text-[clamp(32px,4.5vw,48px)] font-semibold mb-4">
              One surface for content, search, forms, and publishing
            </h2>
            <p className="text-[17px] text-muted max-w-2xl mx-auto">
              Owned by IntegAI. Offline-first. Deterministic.
            </p>
          </div>
          
          <div className="grid md:grid-cols-3 gap-6 max-w-5xl mx-auto">
            <div className="rounded-xl border border-edge bg-panel/60 p-6 hover:border-aiGreen/50 transition-colors">
              <div className="w-16 h-16 rounded-lg bg-aiGreen/10 flex items-center justify-center mb-4">
                <img src={getImage('earth_realistic')} alt="" className="w-10 h-10 opacity-60" />
              </div>
              <h3 className="text-lg font-semibold mb-2">Offline-first RAG</h3>
              <p className="text-sm text-muted">
                Obsidian → E5-small-v2 (GGUF) → Chroma + Neo4j. No external calls by default.
              </p>
            </div>
            
            <div className="rounded-xl border border-edge bg-panel/60 p-6 hover:border-aiGreen/50 transition-colors">
              <div className="w-16 h-16 rounded-lg bg-brandGold/10 flex items-center justify-center mb-4">
                <img src={getImage('ai_dna')} alt="" className="w-10 h-10 opacity-60" />
              </div>
              <h3 className="text-lg font-semibold mb-2">Deterministic Agents</h3>
              <p className="text-sm text-muted">
                9-core graph: Planner, Retriever, Judge, Executor, Memory, Safety, Tools, Observer, Publisher.
              </p>
            </div>
            
            <div className="rounded-xl border border-edge bg-panel/60 p-6 hover:border-aiGreen/50 transition-colors">
              <div className="w-16 h-16 rounded-lg bg-aiGreen/10 flex items-center justify-center mb-4">
                <img src={getImage('sovereignty_badge')} alt="" className="w-10 h-10 opacity-60" />
              </div>
              <h3 className="text-lg font-semibold mb-2">Immutable Artifacts</h3>
              <p className="text-sm text-muted">
                All substantial outputs packaged as .integpkg to MinIO with checksums.
              </p>
            </div>
          </div>
        </div>
      </section>

      {/* 5. 9-CORE AGENT HONEYCOMB */}
      <section className="py-20 md:py-28 relative overflow-hidden">
        {/* Background honeycomb pattern */}
        <div className="absolute inset-0 opacity-10 pointer-events-none">
          <img 
            src={getImage('honeycomb_agents')} 
            alt="" 
            className="w-full h-full object-contain"
            aria-hidden="true"
          />
        </div>
        
        <div className="container-wrap relative">
          <div className="text-center mb-12">
            <h2 className="text-[clamp(32px,4.5vw,48px)] font-semibold mb-4">
              9-Core Agent Architecture
            </h2>
            <p className="text-[17px] text-muted max-w-2xl mx-auto">
              Hover to explore each agent's role in the orchestration graph.
            </p>
          </div>
          
          {/* Honeycomb Grid */}
          <div className="relative max-w-5xl mx-auto">
            {/* Center the honeycomb visual */}
            <div className="relative aspect-square max-w-3xl mx-auto">
              <img 
                src={getImage('honeycomb_agents')} 
                alt="Agent Honeycomb Architecture" 
                className="w-full h-full object-contain opacity-80"
              />
              
              {/* Interactive hexagon overlays - positioned absolutely */}
              <HoneycombAgent 
                position="top-[8%] left-1/2 -translate-x-1/2"
                agent={{
                  name: "Planner",
                  icon: "🎯",
                  desc: "Analyzes query, determines required tools & data sources, proposes execution steps",
                  color: "brandGold"
                }}
              />
              
              <HoneycombAgent 
                position="top-[25%] left-[20%]"
                agent={{
                  name: "Retriever",
                  icon: "🔍",
                  desc: "Dense + graph retrieval from Chroma & Neo4j, ranks contexts by relevance",
                  color: "aiGreen"
                }}
              />
              
              <HoneycombAgent 
                position="top-[25%] right-[20%]"
                agent={{
                  name: "Judge",
                  icon: "⚖️",
                  desc: "Validates context sufficiency, trust scores, flags HITL gates",
                  color: "brandGold"
                }}
              />
              
              <HoneycombAgent 
                position="top-[50%] left-[8%]"
                agent={{
                  name: "Executor",
                  icon: "⚡",
                  desc: "Runs LLM inference (Gemma fast-path → Mistral fallback), generates draft",
                  color: "aiGreen"
                }}
              />
              
              <HoneycombAgent 
                position="top-[50%] left-1/2 -translate-x-1/2"
                agent={{
                  name: "Memory",
                  icon: "🧠",
                  desc: "Persists summaries, embeddings, graph edges to Postgres & Neo4j",
                  color: "brandGold"
                }}
              />
              
              <HoneycombAgent 
                position="top-[50%] right-[8%]"
                agent={{
                  name: "Safety",
                  icon: "🛡️",
                  desc: "Applies policy profile, redacts PII, gates online access",
                  color: "aiGreen"
                }}
              />
              
              <HoneycombAgent 
                position="bottom-[25%] left-[20%]"
                agent={{
                  name: "Tools",
                  icon: "🔧",
                  desc: "Broker for MinIO, Chroma, Neo4j, Vault; enforces timeouts & retries",
                  color: "brandGold"
                }}
              />
              
              <HoneycombAgent 
                position="bottom-[25%] right-[20%]"
                agent={{
                  name: "Observer",
                  icon: "👁️",
                  desc: "Emits structured telemetry to Langfuse/Phoenix with PII redaction",
                  color: "aiGreen"
                }}
              />
              
              <HoneycombAgent 
                position="bottom-[8%] left-1/2 -translate-x-1/2"
                agent={{
                  name: "Publisher",
                  icon: "📦",
                  desc: "Packages outputs as .integpkg to MinIO, invalidates caches",
                  color: "brandGold"
                }}
              />
            </div>
          </div>
        </div>
      </section>

      {/* 6. SECTOR AGENTS */}
      <section className="py-20 md:py-28 bg-panel/20 border-t border-edge">
        <div className="container-wrap">
          <div className="text-center mb-12">
            <h2 className="text-[clamp(32px,4.5vw,48px)] font-semibold mb-4">
              Sector-Specific Agents
            </h2>
            <p className="text-[17px] text-muted max-w-2xl mx-auto">
              Built on the 9-core foundation, tailored for your industry.
            </p>
          </div>
          
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
            {[
              { name: 'Construction', sector: 'construction' },
              { name: 'Environmental', sector: 'environmental' },
              { name: 'Conservation', sector: 'conservation' },
              { name: 'Pharma (CROx)', sector: 'pharma-crox' },
              { name: 'Procurement', sector: 'procurement' },
              { name: 'Agriculture', sector: 'agriculture' },
              { name: 'Trader/Economics', sector: 'trader-economics' },
              { name: 'Healthcare', sector: 'healthcare' },
              { name: 'Insurance', sector: 'insurance' },
              { name: 'Custom', sector: 'custom' }
            ].map(({ name, sector }) => (
              <a 
                href={`/agents/deploy?sector=${sector}`}
                key={sector}
                className="group rounded-xl border border-edge bg-panel/60 p-6 hover:border-aiGreen/50 hover:scale-[1.02] hover:shadow-xl hover:shadow-aiGreen/10 transition-all duration-300 cursor-pointer"
              >
                <div className="flex items-center justify-between">
                  <p className="text-lg font-semibold text-text group-hover:text-aiGreen transition-colors">
                    {name}
                  </p>
                  <div className="opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center gap-2 text-sm text-brandGold font-medium">
                    <span>Deploy Agents</span>
                    <svg className="w-4 h-4 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 8l4 4m0 0l-4 4m4-4H3" />
                    </svg>
                  </div>
                </div>
              </a>
            ))}
          </div>
          
          <div className="text-center mt-8">
            <a href="/agents" className="btn btn-ghost">
              Explore all agents →
            </a>
          </div>
        </div>
      </section>

      {/* 7. ABOUT TEASERS */}
      <section className="py-20 md:py-28">
        <div className="container-wrap">
          <div className="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto">
            <a href="/about/michael" className="group rounded-2xl border border-edge bg-panel/60 overflow-hidden hover:border-brandGold/50 transition-colors">
              <div className="aspect-[4/3] relative overflow-hidden bg-gradient-to-br from-brandGold/20 to-transparent flex items-center justify-center">
                <img 
                  src={getImage('hisl_logo')}
                  alt="HISL - Human-first Industrial Safety Intelligence"
                  className="w-32 h-32 object-contain group-hover:scale-105 transition-transform duration-500"
                  loading="lazy"
                />
              </div>
              <div className="p-6">
                <h3 className="text-xl font-semibold mb-2">About Michael</h3>
                <p className="text-sm text-muted">
                  From hands-on build to sovereign AI.
                </p>
              </div>
            </a>
            
            <a href="/about/integai" className="group rounded-2xl border border-edge bg-panel/60 overflow-hidden hover:border-aiGreen/50 transition-colors">
              <div className="aspect-[4/3] relative overflow-hidden bg-gradient-to-br from-aiGreen/20 to-transparent">
                <img 
                  src={getImage('integai_logo')} 
                  alt="IntegAI"
                  className="w-full h-full object-contain p-12 group-hover:scale-105 transition-transform duration-500"
                />
              </div>
              <div className="p-6">
                <h3 className="text-xl font-semibold mb-2">About IntegAI</h3>
                <p className="text-sm text-muted">
                  Offline-first orchestration for websites & ops.
                </p>
              </div>
            </a>
          </div>
        </div>
      </section>

      {/* 8. POEM SECTION */}
      <section className="relative overflow-hidden border-y border-white/5">
        {/* Starfield background */}
        <div className="absolute inset-0 z-0">
          <img 
            src={getImage('starfield_poem')} 
            alt="" 
            className="w-full h-full object-cover"
            style={{ 
              objectPosition: 'center 30%',
              objectFit: 'cover',
              filter: 'brightness(0.7) contrast(1.1)'
            }}
            aria-hidden="true"
          />
          
          {/* Shooting stars layer */}
          <div className="shooting-stars" aria-hidden="true">
            <div className="shooting-star"></div>
            <div className="shooting-star"></div>
            <div className="shooting-star"></div>
            <div className="shooting-star"></div>
            <div className="shooting-star"></div>
            <div className="shooting-star"></div>
            <div className="shooting-star"></div>
            <div className="shooting-star"></div>
            <div className="shooting-star"></div>
            <div className="shooting-star"></div>
          </div>
          
          {/* Dark overlay for text readability */}
          <div className="absolute inset-0 bg-gradient-to-b from-bg/90 via-bg/70 to-bg/90" />
        </div>
        
        {/* Content */}
        <div className="relative z-10 container-wrap py-20 md:py-28">
          <div className="max-w-3xl mx-auto text-center">
            <div className="inline-block px-4 py-2 rounded-full border border-brandGold/30 bg-brandGold/10 backdrop-blur-sm mb-8">
              <span className="text-sm text-brandGold font-medium">The Craftsman's Creed</span>
            </div>
            
            <article className="rounded-2xl border border-edge/50 bg-panel/60 backdrop-blur-xl p-8 md:p-10">
              <p className="text-[19px] md:text-[21px] leading-relaxed text-text font-serif italic">
                Then prove we now with best endevour, what from our efforts yet may spring; 
                he justly is dispised who never, did thought to aide his labours bring; 
                for this is arts true indication - when skill is minister to thought, 
                when types that are the minds creation - the hand to perfect form has wrought
              </p>
            </article>
            
            <p className="mt-6 text-sm text-muted">
              Our philosophical anchor — craft meets intelligence.
            </p>
          </div>
        </div>
      </section>

      {/* 9. CTA SECTION */}
      <section className="py-20 md:py-28 bg-gradient-to-b from-panel/10 via-panel/20 to-panel/10">
        <div className="container-wrap text-center">
          <h2 className="text-[clamp(32px,4.5vw,48px)] font-semibold mb-6">
            Build with IntegAI
          </h2>
          <p className="text-[17px] text-muted mb-8 max-w-2xl mx-auto">
            Ready to deploy sovereign AI agents in your regulated environment?
          </p>
          <a href="/contact" className="btn btn-gold px-8 py-3 text-base font-semibold">
            Talk to us
          </a>
        </div>
      </section>

      {/* 8. footer_v1: GlobalFooter */}
      <GlobalFooter />
    </main>
  );
}